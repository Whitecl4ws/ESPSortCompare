#include "../externals/glad/glad.h"

#include "../includes/defs.h"
#include "../includes/render.h"

uint32_t textureArial;
Vec2f textureArialSize;
Character charactersArial[] = {
  {' ', 520, 170, 18, 18, 9, 9, 9},
  {'!', 200, 130, 21, 40, 6, 31, 9},
  {'"', 329, 170, 27, 25, 8, 31, 11},
  {'#', 337, 89, 36, 40, 9, 31, 18},
  {'$', 290, 0, 35, 45, 9, 33, 18},
  {'%', 542, 0, 44, 41, 8, 32, 28},
  {'&', 39, 48, 38, 41, 8, 31, 21},
  {'\'', 356, 170, 21, 25, 7, 31, 6},
  {'(', 56, 0, 27, 48, 7, 32, 10},
  {')', 83, 0, 27, 48, 9, 32, 10},
  {'*', 244, 170, 29, 29, 8, 31, 12},
  {'+', 177, 170, 34, 34, 7, 28, 18},
  {',', 307, 170, 22, 26, 6, 12, 9},
  {'-', 436, 170, 26, 21, 8, 19, 10},
  {'.', 462, 170, 21, 21, 6, 12, 9},
  {'/', 488, 0, 27, 42, 9, 32, 9},
  {'0', 189, 48, 34, 41, 8, 32, 18},
  {'1', 136, 130, 32, 40, 7, 31, 18},
  {'2', 291, 48, 33, 41, 7, 32, 18},
  {'3', 324, 48, 33, 41, 8, 32, 18},
  {'4', 35, 130, 34, 40, 8, 31, 18},
  {'5', 357, 48, 33, 41, 8, 31, 18},
  {'6', 390, 48, 33, 41, 7, 32, 18},
  {'7', 103, 130, 33, 40, 7, 31, 18},
  {'8', 423, 48, 33, 41, 8, 32, 18},
  {'9', 456, 48, 33, 41, 7, 32, 18},
  {':', 156, 170, 21, 35, 6, 26, 9},
  {';', 269, 130, 22, 39, 6, 26, 9},
  {'<', 539, 130, 34, 35, 7, 28, 18},
  {'=', 273, 170, 34, 28, 7, 25, 18},
  {'>', 573, 130, 34, 35, 7, 28, 18},
  {'?', 223, 48, 34, 41, 8, 32, 18},
  {'@', 245, 0, 45, 46, 6, 32, 32},
  {'A', 109, 89, 39, 40, 9, 31, 21},
  {'B', 553, 89, 35, 40, 6, 31, 21},
  {'C', 77, 48, 38, 41, 7, 32, 23},
  {'D', 263, 89, 37, 40, 6, 31, 23},
  {'E', 588, 89, 35, 40, 6, 31, 21},
  {'F', 69, 130, 34, 40, 6, 31, 19},
  {'G', 0, 48, 39, 41, 7, 32, 25},
  {'H', 373, 89, 36, 40, 6, 31, 23},
  {'I', 221, 130, 21, 40, 6, 31, 9},
  {'J', 553, 48, 31, 41, 8, 31, 16},
  {'K', 409, 89, 36, 40, 6, 31, 21},
  {'L', 168, 130, 32, 40, 6, 31, 18},
  {'M', 69, 89, 40, 40, 6, 31, 26},
  {'N', 445, 89, 36, 40, 6, 31, 23},
  {'O', 586, 0, 40, 41, 7, 32, 25},
  {'P', 0, 130, 35, 40, 6, 31, 21},
  {'Q', 205, 0, 40, 47, 7, 32, 25},
  {'R', 300, 89, 37, 40, 6, 31, 23},
  {'S', 115, 48, 37, 41, 8, 32, 21},
  {'T', 481, 89, 36, 40, 8, 31, 19},
  {'U', 152, 48, 37, 41, 7, 31, 23},
  {'V', 148, 89, 39, 40, 9, 31, 21},
  {'W', 21, 89, 48, 40, 9, 31, 30},
  {'X', 187, 89, 38, 40, 8, 31, 21},
  {'Y', 225, 89, 38, 40, 8, 31, 21},
  {'Z', 517, 89, 36, 40, 8, 31, 19},
  {'[', 110, 0, 25, 48, 7, 32, 9},
  {'\\', 515, 0, 27, 42, 9, 32, 9},
  {']', 135, 0, 25, 48, 9, 32, 9},
  {'^', 211, 170, 33, 30, 9, 31, 15},
  {'_', 483, 170, 37, 20, 9, 5, 18},
  {'`', 377, 170, 25, 23, 7, 33, 10},
  {'a', 291, 130, 35, 36, 8, 26, 18},
  {'b', 424, 0, 32, 42, 7, 32, 18},
  {'c', 392, 130, 32, 36, 8, 26, 16},
  {'d', 325, 0, 33, 42, 8, 32, 18},
  {'e', 326, 130, 33, 36, 8, 26, 18},
  {'f', 584, 48, 27, 41, 9, 32 ,9},
  {'g', 358, 0, 33, 42, 8, 26, 18},
  {'h', 489, 48, 32, 41, 7, 32, 18},
  {'i', 611, 48, 21, 41, 7, 32 ,7},
  {'j', 160, 0, 24, 48, 10, 32 ,7},
  {'k', 521, 48, 32, 41, 7, 32, 16},
  {'l', 0, 89, 21, 41, 7, 32, 7},
  {'m', 498, 130, 41, 35, 7, 26, 26},
  {'n', 34, 170, 32, 35, 7, 26, 18},
  {'o', 359, 130, 33, 36, 8, 26, 18},
  {'p', 456, 0, 32, 42, 7, 26, 18},
  {'q', 391, 0, 33, 42, 8, 26, 18},
  {'r', 130, 170, 26, 35, 7, 26, 10},
  {'s', 424, 130, 32, 36, 8, 26, 16},
  {'t', 242, 130, 27, 39, 9, 30, 9},
  {'u', 66, 170, 32, 35, 7, 26, 18},
  {'v', 607, 130, 34, 35, 9, 26, 16},
  {'w', 456, 130, 42, 35, 9, 26, 23},
  {'x', 0, 170, 34, 35, 9, 26, 16},
  {'y', 257, 48, 34, 41, 9, 26, 16},
  {'z', 98, 170, 32, 35, 8, 26, 16},
  {'{', 0, 0, 28, 48, 8, 32, 10},
  {'|', 184, 0, 21, 48, 6, 32, 8},
  {'}', 28, 0, 28, 48, 8, 32, 10},
  {'~', 402, 170, 34, 22, 8, 22, 18}
}; /* Characters of the ASCII set are all consequent,
so don't worry about mapping them! */

int ASCIICharacterToArrayIndex(char character) {
  return character - ' ';
}

void createFontTextures() {
  int width, height;
  textureArial = createTextureOGL(GL_TEXTURE_2D, "assets/fonts/font.png", &width, &height);
  textureArialSize[0] = width;
  textureArialSize[1] = height;
  for(int i = 0; i < StaticArrayLength(charactersArial); ++i) {
    charactersArial[i].x /= width;
    charactersArial[i].y /= height;
  }
}

void destroyFontTextures() {
  glDeleteTextures(1, &textureArial);
}

FontWrapper retrieveFontArial() {
  FontWrapper font;
  font.texture = textureArial;
  font.characters = charactersArial;
  font.characterArrayIndexMapper = ASCIICharacterToArrayIndex;
  font.width = textureArialSize[0];
  font.height = textureArialSize[1];
  font.jump = 35;
  return font;
}
